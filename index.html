<!DOCTYPE html>
<html>

<head>
    <title>Notification with Service Worker</title>
</head>

<body>
    <button id="enable">Enable Notifications</button>
    <script>
        if (`serviceWorker` in navigator) {
            navigator.serviceWorker.register(`serviceWorker.js`).then(function (registration) {
            }).catch(function (error) {
                alert(`Service Worker registration failed:`, error)
            })
        }
        document.getElementById(`enable`).addEventListener(`click`, function () {
            Notification.requestPermission().then(function (permission) {
                if (permission == `granted`) {
                    navigator.serviceWorker.ready.then(function (registration) {
                        registration.active.postMessage({
                            type: `showNotification`,
                            body: `Test.`
                        })
                    })
                }
            })
        })
    </script>
</body>

</html>