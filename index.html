<!DOCTYPE html>
<html>

<head>
    <title>Notification with Service Worker</title>
</head>

<body>
    <button id="enable">Enable Notifications</button>
    <div id="output"></div>
    <script>
        if (`serviceWorker` in navigator) {
            navigator.serviceWorker.register(`serviceWorker.js`).then(function (registration) {
            }).catch(function (error) {
                alert(`Service Worker registration failed:`, error)
            })
        }
        document.getElementById(`enable`).addEventListener(`click`, function () {
            setInterval(function () {
                let currentTime = new Date();
                let hours = currentTime.getHours();
                let minutes = currentTime.getMinutes();
                if (hours == Number(16) && minutes == Number(13)) {
                    Notification.requestPermission().then(function (permission) {
                        if (permission == `granted`) {
                            navigator.serviceWorker.ready.then(function (registration) {
                                registration.active.postMessage({
                                    type: `showNotification`,
                                    body: `Test.`
                                })
                            })
                        }
                    })
                }
            }, 60 * 1000)//Call every minute.
            document.getElementById(`output`).innerHTML = `Notification should show2.`;
        })
    </script>
</body>

</html>